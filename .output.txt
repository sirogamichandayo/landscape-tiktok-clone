
> landscape-tiktok-clone@0.1.0 test
> jest --config jest.config.mjs

FAIL src/utils/__tests__/testData.test.ts (16.653 s)
  ‚óè Console

    console.error
      Error clearing test data: TypeError: (0 , firestore_1.getDocs) is not a function
          at clearTestData (/Users/kota.tomooka/IdeaProjects/tictok/src/utils/testData.ts:59:40)
          at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/src/utils/__tests__/testData.test.ts:9:26)
          at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:246:5)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12)

      64 |     console.log('All test data cleared successfully');
      65 |   } catch (error) {
    > 66 |     console.error('Error clearing test data:', error);
         |             ^
      67 |     throw error;
      68 |   }
      69 | };

      at clearTestData (src/utils/testData.ts:66:13)
      at Object.<anonymous> (src/utils/__tests__/testData.test.ts:9:26)

    console.error
      Failed to clear test data: TypeError: (0 , firestore_1.getDocs) is not a function
          at clearTestData (/Users/kota.tomooka/IdeaProjects/tictok/src/utils/testData.ts:59:40)
          at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/src/utils/__tests__/testData.test.ts:9:26)
          at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:246:5)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12)

       9 |       await clearTestData();
      10 |     } catch (error) {
    > 11 |       console.error('Failed to clear test data:', error);
         |               ^
      12 |       throw error;
      13 |     }
      14 |   });

      at Object.<anonymous> (src/utils/__tests__/testData.test.ts:11:15)

  ‚óè Test Data Management ‚Ä∫ should add test data successfully

    TypeError: (0 , firestore_1.getDocs) is not a function

      57 |   try {
      58 |     const videosRef = collection(db, 'videos');
    > 59 |     const querySnapshot = await getDocs(videosRef);
         |                                        ^
      60 |
      61 |     const deletePromises = querySnapshot.docs.map(doc => deleteDoc(doc.ref));
      62 |     await Promise.all(deletePromises);

      at clearTestData (src/utils/testData.ts:59:40)
      at Object.<anonymous> (src/utils/__tests__/testData.test.ts:9:26)

FAIL src/components/__tests__/VideoPlayer.test.tsx
  ‚óè Test suite failed to run

    [96msrc/components/__tests__/VideoPlayer.test.tsx[0m:[93m17[0m:[93m7[0m - [91merror[0m[90m TS2451: [0mCannot redeclare block-scoped variable 'mockUnsubscribe'.

    [7m17[0m const mockUnsubscribe = jest.fn();
    [7m  [0m [91m      ~~~~~~~~~~~~~~~[0m
    [96msrc/components/__tests__/VideoPlayer.test.tsx[0m:[93m20[0m:[93m7[0m - [91merror[0m[90m TS2451: [0mCannot redeclare block-scoped variable 'mockUnsubscribe'.

    [7m20[0m const mockUnsubscribe = jest.fn();
    [7m  [0m [91m      ~~~~~~~~~~~~~~~[0m

FAIL src/components/__tests__/CommentSection.test.tsx (23.394 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

      51 |     mockCreateComment.mockResolvedValueOnce('new-comment-id');
      52 |
    > 53 |     render(
         |           ^
      54 |       <CommentSection
      55 |         isOpen={true}
      56 |         onClose={() => {}}

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/components/__tests__/CommentSection.test.tsx:53:11)

    console.error
      Warning: React does not recognize the `isOpen` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `isopen` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
          at div
          at displayName (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
          at CommentSection (/Users/kota.tomooka/IdeaProjects/tictok/src/components/CommentSection.tsx:151:58)

      51 |     mockCreateComment.mockResolvedValueOnce('new-comment-id');
      52 |
    > 53 |     render(
         |           ^
      54 |       <CommentSection
      55 |         isOpen={true}
      56 |         onClose={() => {}}

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at validateProperty$1 (node_modules/react-dom/cjs/react-dom.development.js:3757:7)
      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom.development.js:3803:21)
      at validateProperties$2 (node_modules/react-dom/cjs/react-dom.development.js:3827:3)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom.development.js:9541:5)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom.development.js:9830:5)
      at finalizeInitialChildren (node_modules/react-dom/cjs/react-dom.development.js:10950:3)
      at completeWork (node_modules/react-dom/cjs/react-dom.development.js:22232:17)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26632:16)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26607:5)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/components/__tests__/CommentSection.test.tsx:53:11)

    console.error
      Error: Uncaught [TypeError: unsubscribe is not a function]
          at reportException (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
          at invokeEventListeners (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
          at HTMLUnknownElementImpl._dispatch (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
          at HTMLUnknownElementImpl.dispatchEvent (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
          at HTMLUnknownElement.dispatchEvent (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
          at Object.invokeGuardedCallbackDev (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at reportUncaughtErrorInDEV (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22877:5)
          at captureCommitPhaseError (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27165:5)
          at safelyCallDestroy (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22973:5)
          at commitHookEffectListUnmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
          at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
          at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
          at commitPassiveUnmountEffects_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
          at commitPassiveUnmountEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
          at flushPassiveEffectsImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
          at flushPassiveEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
          at commitRootImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
          at commitRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26721:5)
          at performSyncWorkOnRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26156:3)
          at flushSyncCallbacks (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:12042:22)
          at flushSync (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26240:7)
          at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:29375:5)
          at Object.unmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:126:12)
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:262:12
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:64:24
          at act (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react/cjs/react.development.js:2512:16)
          at actWithWarning (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
          at cleanup (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:257:22)
          at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/index.js:35:25)
          at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12) {
        detail: TypeError: unsubscribe is not a function
            at /Users/kota.tomooka/IdeaProjects/tictok/src/components/CommentSection.tsx:165:18
            at safelyCallDestroy (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
            at commitHookEffectListUnmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
            at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
            at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
            at commitPassiveUnmountEffects_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
            at commitPassiveUnmountEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
            at flushPassiveEffectsImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
            at flushPassiveEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
            at commitRootImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
            at commitRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26721:5)
            at performSyncWorkOnRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26156:3)
            at flushSyncCallbacks (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:12042:22)
            at flushSync (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26240:7)
            at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:29375:5)
            at Object.unmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:126:12)
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:262:12
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:64:24
            at act (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react/cjs/react.development.js:2512:16)
            at actWithWarning (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:63:25
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:261:28
            at Array.forEach (<anonymous>)
            at cleanup (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:257:22)
            at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/index.js:35:25)
            at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
            at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
            at processTicksAndRejections (node:internal/process/task_queues:95:5)
            at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:254:5)
            at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
            at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
            at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
            at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
            at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
            at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
            at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
            at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12),
        type: 'unhandled exception'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:63:23)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at reportUncaughtErrorInDEV (node_modules/react-dom/cjs/react-dom.development.js:22877:5)
      at captureCommitPhaseError (node_modules/react-dom/cjs/react-dom.development.js:27165:5)
      at safelyCallDestroy (node_modules/react-dom/cjs/react-dom.development.js:22973:5)
      at commitHookEffectListUnmount (node_modules/react-dom/cjs/react-dom.development.js:23139:11)
      at commitPassiveUnmountInsideDeletedTreeOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25140:11)
      at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (node_modules/react-dom/cjs/react-dom.development.js:25087:5)
      at commitPassiveUnmountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24995:11)
      at commitPassiveUnmountEffects (node_modules/react-dom/cjs/react-dom.development.js:24980:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27077:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:27023:14)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26974:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

    console.error
      The above error occurred in the <CommentSection> component:
      
          at CommentSection (/Users/kota.tomooka/IdeaProjects/tictok/src/components/CommentSection.tsx:151:58)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

    console.error
      Failed to create comment: Error: Failed to create comment
          at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/src/components/__tests__/CommentSection.test.tsx:101:45)
          at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12)

      188 |       const errorMessage = error instanceof Error ? error.message : 'Failed to create comment';
      189 |       setError(errorMessage);
    > 190 |       console.error('Failed to create comment:', error);
          |               ^
      191 |     } finally {
      192 |       setIsLoading(false);
      193 |     }

      at handleSubmit (src/components/CommentSection.tsx:190:15)

    console.error
      Error: Uncaught [TypeError: unsubscribe is not a function]
          at reportException (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
          at invokeEventListeners (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
          at HTMLUnknownElementImpl._dispatch (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
          at HTMLUnknownElementImpl.dispatchEvent (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
          at HTMLUnknownElement.dispatchEvent (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
          at Object.invokeGuardedCallbackDev (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at reportUncaughtErrorInDEV (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22877:5)
          at captureCommitPhaseError (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27165:5)
          at safelyCallDestroy (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22973:5)
          at commitHookEffectListUnmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
          at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
          at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
          at commitPassiveUnmountEffects_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
          at commitPassiveUnmountEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
          at flushPassiveEffectsImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
          at flushPassiveEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
          at commitRootImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
          at commitRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26721:5)
          at performSyncWorkOnRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26156:3)
          at flushSyncCallbacks (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:12042:22)
          at flushSync (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26240:7)
          at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:29375:5)
          at Object.unmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:126:12)
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:262:12
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:64:24
          at act (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react/cjs/react.development.js:2512:16)
          at actWithWarning (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
          at cleanup (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:257:22)
          at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/index.js:35:25)
          at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
          at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12) {
        detail: TypeError: unsubscribe is not a function
            at /Users/kota.tomooka/IdeaProjects/tictok/src/components/CommentSection.tsx:165:18
            at safelyCallDestroy (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:22971:5)
            at commitHookEffectListUnmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:23139:11)
            at commitPassiveUnmountInsideDeletedTreeOnFiber (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25140:11)
            at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:25087:5)
            at commitPassiveUnmountEffects_begin (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24995:11)
            at commitPassiveUnmountEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:24980:3)
            at flushPassiveEffectsImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27077:3)
            at flushPassiveEffects (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:27023:14)
            at commitRootImpl (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26974:5)
            at commitRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26721:5)
            at performSyncWorkOnRoot (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26156:3)
            at flushSyncCallbacks (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:12042:22)
            at flushSync (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:26240:7)
            at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom.development.js:29375:5)
            at Object.unmount (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:126:12)
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:262:12
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:64:24
            at act (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react/cjs/react.development.js:2512:16)
            at actWithWarning (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/act-compat.js:63:25
            at /Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:261:28
            at Array.forEach (<anonymous>)
            at cleanup (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/pure.js:257:22)
            at Object.<anonymous> (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/@testing-library/react/dist/index.js:35:25)
            at Promise.then.completed (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:298:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/utils.js:231:10)
            at _callCircusHook (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:281:40)
            at _runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:254:5)
            at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:126:9)
            at _runTestsForDescribeBlock (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:121:9)
            at run (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/run.js:71:3)
            at runAndTransformResultsToJestFormat (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
            at jestAdapter (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
            at runTestInternal (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:367:16)
            at runTest (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/runTest.js:444:34)
            at Object.worker (/Users/kota.tomooka/IdeaProjects/tictok/node_modules/jest-runner/build/testWorker.js:106:12),
        type: 'unhandled exception'
      }

      at VirtualConsole.<anonymous> (node_modules/jest-environment-jsdom/build/index.js:63:23)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at reportUncaughtErrorInDEV (node_modules/react-dom/cjs/react-dom.development.js:22877:5)
      at captureCommitPhaseError (node_modules/react-dom/cjs/react-dom.development.js:27165:5)
      at safelyCallDestroy (node_modules/react-dom/cjs/react-dom.development.js:22973:5)
      at commitHookEffectListUnmount (node_modules/react-dom/cjs/react-dom.development.js:23139:11)
      at commitPassiveUnmountInsideDeletedTreeOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25140:11)
      at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (node_modules/react-dom/cjs/react-dom.development.js:25087:5)
      at commitPassiveUnmountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24995:11)
      at commitPassiveUnmountEffects (node_modules/react-dom/cjs/react-dom.development.js:24980:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27077:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:27023:14)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26974:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

    console.error
      The above error occurred in the <CommentSection> component:
      
          at CommentSection (/Users/kota.tomooka/IdeaProjects/tictok/src/components/CommentSection.tsx:151:58)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

  ‚óè CommentSection ‚Ä∫ should create a comment successfully

    expect(element).toHaveValue()

    Expected the element to have value:

    Received:
      Test comment

      75 |     });
      76 |
    > 77 |     expect(input).toHaveValue('');
         |                   ^
      78 |     expect(screen.queryByRole('alert')).not.toBeInTheDocument();
      79 |   });
      80 |

      at Object.<anonymous> (src/components/__tests__/CommentSection.test.tsx:77:19)

  ‚óè CommentSection ‚Ä∫ should create a comment successfully

    TypeError: unsubscribe is not a function

      163 |     });
      164 |
    > 165 |     return () => unsubscribe();
          |                  ^
      166 |   }, [isOpen, videoId]);
      167 |
      168 |   const handleSubmit = async (e: React.FormEvent) => {

      at src/components/CommentSection.tsx:165:18
      at safelyCallDestroy (node_modules/react-dom/cjs/react-dom.development.js:22971:5)
      at commitHookEffectListUnmount (node_modules/react-dom/cjs/react-dom.development.js:23139:11)
      at commitPassiveUnmountInsideDeletedTreeOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25140:11)
      at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (node_modules/react-dom/cjs/react-dom.development.js:25087:5)
      at commitPassiveUnmountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24995:11)
      at commitPassiveUnmountEffects (node_modules/react-dom/cjs/react-dom.development.js:24980:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27077:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:27023:14)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26974:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

  ‚óè CommentSection ‚Ä∫ should show error message when comment creation fails

    TypeError: unsubscribe is not a function

      163 |     });
      164 |
    > 165 |     return () => unsubscribe();
          |                  ^
      166 |   }, [isOpen, videoId]);
      167 |
      168 |   const handleSubmit = async (e: React.FormEvent) => {

      at src/components/CommentSection.tsx:165:18
      at safelyCallDestroy (node_modules/react-dom/cjs/react-dom.development.js:22971:5)
      at commitHookEffectListUnmount (node_modules/react-dom/cjs/react-dom.development.js:23139:11)
      at commitPassiveUnmountInsideDeletedTreeOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25140:11)
      at commitPassiveUnmountEffectsInsideOfDeletedTree_begin (node_modules/react-dom/cjs/react-dom.development.js:25087:5)
      at commitPassiveUnmountEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24995:11)
      at commitPassiveUnmountEffects (node_modules/react-dom/cjs/react-dom.development.js:24980:3)
      at flushPassiveEffectsImpl (node_modules/react-dom/cjs/react-dom.development.js:27077:3)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom.development.js:27023:14)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26974:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at flushSync (node_modules/react-dom/cjs/react-dom.development.js:26240:7)
      at ReactDOMRoot.Object.<anonymous>.ReactDOMHydrationRoot.unmount.ReactDOMRoot.unmount [as unmount] (node_modules/react-dom/cjs/react-dom.development.js:29375:5)
      at Object.unmount (node_modules/@testing-library/react/dist/pure.js:126:12)
      at node_modules/@testing-library/react/dist/pure.js:262:12
      at node_modules/@testing-library/react/dist/act-compat.js:64:24

      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at node_modules/@testing-library/react/dist/pure.js:261:28
          at Array.forEach (<anonymous>)
      at cleanup (node_modules/@testing-library/react/dist/pure.js:257:22)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:35:25)

[999D[KTest Suites: 3 failed, 3 total
Tests:       3 failed, 1 passed, 4 total
Snapshots:   0 total
Time:        26.68 s
Ran all test suites.